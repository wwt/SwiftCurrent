<!doctype html>
<html lang="en">
 <head> 
  <title>Server Driven Workflows  Reference</title> 
  <link rel="stylesheet" type="text/css" href="css/jazzy.css"> 
  <link rel="stylesheet" type="text/css" href="css/highlight.css"> 
  <meta charset="utf-8"> 
  <script src="js/jquery.min.js" defer></script> 
  <script src="js/jazzy.js" defer></script> 
  <script src="js/lunr.min.js" defer></script> 
  <script src="js/typeahead.jquery.js" defer></script> 
  <script src="js/jazzy.search.js" defer></script> 
 </head> 
 <body> 
  <a name="//apple_ref/swift/Section/Server Driven Workflows" class="dashAnchor"></a> 
  <a title="Server Driven Workflows  Reference"></a> 
  <header class="header"> 
   <p class="header-col header-col--primary"> <a class="header-link" href="index.html"> SwiftCurrent 5.1.12 Docs </a> (95% documented) </p> 
   <div class="header-col--secondary"> 
    <form role="search" action="search.json"> 
     <input type="text" placeholder="Search documentation" data-typeahead> 
    </form> 
   </div> 
   <p class="header-col header-col--secondary"> <a class="header-link" href="https://github.com/wwt/SwiftCurrent"> <img class="header-icon" src="img/gh.png" alt="GitHub"> View on GitHub </a> </p> 
  </header> 
  <p class="breadcrumbs"> <a class="breadcrumb" href="index.html">SwiftCurrent Reference</a> <img class="carat" src="img/carat.png" alt=""> Server Driven Workflows Reference </p> 
  <div class="content-wrapper"> 
   <nav class="navigation"> 
    <ul class="nav-groups"> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="./index.html">Overview</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="why-this-library.html">Why This Library</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="installation.html">Installation</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Creating%20Workflows.html">Creating Workflows</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/FlowRepresentable.html">FlowRepresentable</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/Workflow.html">Workflow</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/PassthroughFlowRepresentable.html">PassthroughFlowRepresentable</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="How%20to%20use%20SwiftCurrent%20with%20SwiftUI.html">How to use SwiftCurrent with SwiftUI</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="getting-started-with-swiftui.html">Getting Started with SwiftUI</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="working-with-navigationview.html">Working with NavigationView</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="working-with-modals.html">Working with Modals</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Creating%20Workflows%20in%20SwiftUI.html">Creating Workflows in SwiftUI</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/WorkflowView.html">WorkflowView</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/WorkflowItem.html">WorkflowItem</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Enums/WorkflowBuilder.html">WorkflowBuilder</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="How%20to%20use%20SwiftCurrent%20with%20UIKit.html">How to use SwiftCurrent with UIKit</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="using-programmatic-views.html">Using Programmatic Views</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="using-storyboards.html">Using Storyboards</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Creating%20Workflows%20in%20UIKit.html">Creating Workflows in UIKit</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Extensions/UIViewController.html">UIViewController</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/UIWorkflowItem.html">UIWorkflowItem</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/HostedWorkflowItem.html">HostedWorkflowItem</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/StoryboardLoadable.html">StoryboardLoadable</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Server%20Driven%20Workflows.html">Server Driven Workflows</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="generated-type-registry.html">Generated Type Registry</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Extensions/JSONDecoder.html">JSONDecoder</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/DecodeWorkflow.html">DecodeWorkflow</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/FlowRepresentableAggregator.html">FlowRepresentableAggregator</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/WorkflowDecodable.html">WorkflowDecodable</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Controlling%20Presentation.html">Controlling Presentation</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/LaunchStyle.html">LaunchStyle</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/LaunchStyle/PresentationType.html">– PresentationType</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/LaunchStyle/SwiftUI.html">– SwiftUI</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/FlowPersistence.html">FlowPersistence</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/FlowPersistence/SwiftUI.html">– SwiftUI</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/UIKitPresenter.html">UIKitPresenter</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Type%20Erasure.html">Type Erasure</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/AnyWorkflow.html">AnyWorkflow</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/AnyWorkflow/DecodingError.html">– DecodingError</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/AnyWorkflow/JSONSchemaVersion.html">– JSONSchemaVersion</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/AnyWorkflow/PassedArgs.html">– PassedArgs</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/AnyFlowRepresentable.html">AnyFlowRepresentable</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Underlying%20Types.html">Underlying Types</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/FlowRepresentableMetadata.html">FlowRepresentableMetadata</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/LinkedList.html">LinkedList</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Classes/LinkedList/Node.html">– Node</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Protocols/OrchestrationResponder.html">OrchestrationResponder</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/ViewControllerWrapper.html">ViewControllerWrapper</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Enums/WorkflowError.html">WorkflowError</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Other%20Extensions.html">Other Extensions</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Extensions/Never.html">Never</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Extensions/WorkflowViewModel.html">WorkflowViewModel</a> </li> 
      </ul> </li> 
     <li class="nav-group-name"> <a class="nav-group-name-link" href="Other%20Structs.html">Other Structures</a> 
      <ul class="nav-group-tasks"> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/AnyWorkflowItem.html">AnyWorkflowItem</a> </li> 
       <li class="nav-group-task"> <a class="nav-group-task-link" href="Structs/WorkflowGroup.html">WorkflowGroup</a> </li> 
      </ul> </li> 
    </ul> 
   </nav> 
   <article class="main-content"> 
    <section class="section"> 
     <div class="section-content top-matter"> 
      <h1>Server Driven Workflows</h1> 
      <h3 id="in-swiftui" class="heading">In SwiftUI</h3> 
      <p><code><a href="Structs/WorkflowView.html">WorkflowView</a></code> has an initializer that allows you to pass in an <code><a href="Classes/AnyWorkflow.html">AnyWorkflow</a></code>. <code><a href="Classes/AnyWorkflow.html">AnyWorkflow</a></code>s can be decoded from <code>Data</code> using either <code><a href="Extensions/JSONDecoder.html#/s:10Foundation11JSONDecoderC12SwiftCurrentE14decodeWorkflow14withAggregator4fromAD03AnyF0CAD017FlowRepresentableH0_p_AA4DataVtKF">JSONDecoder.decodeWorkflow(withAggregator:from:)</a></code>, or the <code><a href="Structs/DecodeWorkflow.html">DecodeWorkflow</a></code> property wrapper.</p> 
      <p>You can use JSON, YAML, or any other key/value-based data formats to define a workflow with data provided you follow <a href="https://github.com/wwt/WorkflowSchema">our schema</a>.</p> 
      <blockquote> 
       <p>Our schema plays well with VSCode if you copy examples from the repo.</p> 
      </blockquote> 
      <p>When using server driven workflows be aware that your views will all be wrapped in an <code>AnyView</code>. This is not true when you define workflows in Swift. This could affect certain animations and potentially have a performance impact on SwiftUI. </p> 
      <p>NOTE: The APIs for SwiftCurrent all accept any form of <code>Data</code>. This means you are free to use your own data formats, but it also means that data does not necessarily have to come from a server. For example, you could feed it from a flat-file if you’re writing a white-labeled application.</p> 
      <h3 id="what-is-an-aggregator" class="heading">What is an Aggregator?</h3> 
      <p><code><a href="Protocols/FlowRepresentableAggregator.html">FlowRepresentableAggregator</a></code> is a simple protocol that identifies all types you wish to decode. It’s how SwiftCurrent can take data and convert it into a <code><a href="Classes/Workflow.html">Workflow</a></code>. You can either create your own aggregator or <a href="https://wwt.github.io/SwiftCurrent/generated-type-registry.html">use our CLI utility</a>.</p> 
      <h2 id="putting-it-all-together" class="heading">Putting it all together</h2> 
      <h4 id="step-1-create-your-views" class="heading">Step 1: Create your views</h4> 
      <pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">FirstView</span><span class="p">:</span> <span class="kt">View</span><span class="p">,</span> <span class="kt">FlowRepresentable</span><span class="p">,</span> <span class="kt">WorkflowDecodable</span> <span class="p">{</span>
    <span class="k">weak</span> <span class="k">var</span> <span class="nv">_workflowPointer</span><span class="p">:</span> <span class="kt">AnyFlowRepresentable</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"I am the first view!"</span><span class="p">)</span>
        <span class="kt">Button</span><span class="p">(</span><span class="s">"Proceed"</span><span class="p">)</span> <span class="p">{</span> <span class="nf">proceedInWorkflow</span><span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">SecondView</span><span class="p">:</span> <span class="kt">View</span><span class="p">,</span> <span class="kt">FlowRepresentable</span><span class="p">,</span> <span class="kt">WorkflowDecodable</span> <span class="p">{</span>
    <span class="k">weak</span> <span class="k">var</span> <span class="nv">_workflowPointer</span><span class="p">:</span> <span class="kt">AnyFlowRepresentable</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"I am the second view!"</span><span class="p">)</span>
        <span class="kt">Button</span><span class="p">(</span><span class="s">"Proceed"</span><span class="p">)</span> <span class="p">{</span> <span class="nf">proceedInWorkflow</span><span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ThirdView</span><span class="p">:</span> <span class="kt">View</span><span class="p">,</span> <span class="kt">FlowRepresentable</span><span class="p">,</span> <span class="kt">WorkflowDecodable</span> <span class="p">{</span>
    <span class="k">weak</span> <span class="k">var</span> <span class="nv">_workflowPointer</span><span class="p">:</span> <span class="kt">AnyFlowRepresentable</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"I am the third view!"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre> 
      <h4 id="step-2-define-your-workflow" class="heading">Step 2: Define your workflow</h4> 
      <pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://raw.githubusercontent.com/wwt/WorkflowSchema/main/workflow-schema.json"</span><span class="p">,</span><span class="w"> </span><span class="s2">"schemaVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.0.1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"flowRepresentableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FirstView"</span><span class="p">,</span><span class="w"> </span><span class="s2">"launchStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navigationLink"</span><span class="p">,</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"flowRepresentableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SecondView"</span><span class="p">,</span><span class="w"> </span><span class="s2">"launchStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navigationLink"</span><span class="p">,</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"flowRepresentableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ThirdView"</span><span class="p">,</span><span class="w"> </span><span class="s2">"launchStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navigationLink"</span><span class="p">,</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span></code></pre> 
      <h4 id="step-3-use-your-workflow-definition" class="heading">Step 3: Use your workflow definition</h4> 
      <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">aggregator</span> <span class="o">=</span> <span class="kt">SwiftCurrentTypeRegistry</span><span class="p">()</span> <span class="c1">// If you use the CLI this will be generated, if not you'll need to create your own, see the docs for `FlowRepresentableAggregator` for more information.</span>
<span class="k">let</span> <span class="nv">data</span><span class="p">:</span> <span class="kt">Data</span> <span class="o">=</span> <span class="nf">getDefinedWorkflow</span><span class="p">()</span> <span class="c1">// from server or flat-file</span>
<span class="k">let</span> <span class="nv">workflow</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decodeWorkflow</span><span class="p">(</span><span class="nv">withAggregator</span><span class="p">:</span> <span class="n">aggregator</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>

<span class="c1">// In your view</span>
<span class="kt">WorkflowView</span><span class="p">(</span><span class="nv">workflow</span><span class="p">:</span> <span class="n">workflow</span><span class="p">)</span><span class="o">.</span><span class="nf">embedInNavigationView</span><span class="p">()</span> <span class="c1">// Our data specified navigation links, so we need to wrap this in a navigation view for them to work.</span>
</code></pre> 
     </div> 
    </section> 
    <section class="section"> 
     <div class="section-content"> 
      <div class="task-group"> 
       <ul class="item-container"> 
        <li class="item"> 
         <div> 
          <code> <a name="/documentation.Generated Type Registry"></a> <a name="//apple_ref/swift/Guide/Generated Type Registry" class="dashAnchor"></a> <a class="direct-link" href="generated-type-registry.html">Generated Type Registry</a> </code> 
         </div> </li> 
        <li class="item"> 
         <div> 
          <code> <a name="/s:10Foundation11JSONDecoderC"></a> <a name="//apple_ref/swift/Extension/JSONDecoder" class="dashAnchor"></a> <a class="direct-link" href="Extensions/JSONDecoder.html">JSONDecoder</a> </code> 
         </div> </li> 
        <li class="item"> 
         <div> 
          <code> <a name="/s:12SwiftCurrent14DecodeWorkflowV"></a> <a name="//apple_ref/swift/Struct/DecodeWorkflow" class="dashAnchor"></a> <a class="direct-link" href="Structs/DecodeWorkflow.html">DecodeWorkflow</a> </code> 
         </div> </li> 
        <li class="item"> 
         <div> 
          <code> <a name="/s:12SwiftCurrent27FlowRepresentableAggregatorP"></a> <a name="//apple_ref/swift/Protocol/FlowRepresentableAggregator" class="dashAnchor"></a> <a class="direct-link" href="Protocols/FlowRepresentableAggregator.html">FlowRepresentableAggregator</a> </code> 
         </div> </li> 
        <li class="item"> 
         <div> 
          <code> <a name="/s:12SwiftCurrent17WorkflowDecodableP"></a> <a name="//apple_ref/swift/Protocol/WorkflowDecodable" class="dashAnchor"></a> <a class="direct-link" href="Protocols/WorkflowDecodable.html">WorkflowDecodable</a> </code> 
         </div> </li> 
       </ul> 
      </div> 
     </div> 
    </section> 
   </article> 
  </div> 
  <section class="footer"> 
   <p>© 2022 <a class="link" href="https://github.com/wwt/SwiftCurrent" target="_blank" rel="external noopener">WWT and Tyler Thompson</a>. All rights reserved. (Last updated: 2022-11-29)</p> 
   <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p> 
  </section>   
 </body>
</html>